<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>孟德爾的遺傳法則：科學探究之旅</title>
    
    <!-- 引入 Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- 引入 Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-green: #6B8E23; /* 橄欖綠 */
            --light-green: #F0FFF0;   /* 蜜瓜綠 */
            --earth-brown: #8B4513;   /* 土壤色 */
            --soil-dark: #5D4037;     /* 深土色 */
            --text-color: #333333;
            --correct-color: #4CAF50;
            --wrong-color: #e74c3c;
            --disabled-gray: #ccc;
            --highlight-yellow: #FFF9C4;
            --board-bg: #34495e;      /* 黑板色 */
            --board-text: #ecf0f1;    /* 粉筆白 */
            --step-bg: #E8F5E9;       /* 步驟背景 */
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #fcfbf4;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.8;
            font-size: 18px;
            overscroll-behavior: none;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border: 2px solid #e0e0e0;
        }

        /* Header */
        header {
            text-align: center;
            border-bottom: 3px solid var(--primary-green);
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        h1 {
            color: var(--primary-green);
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.2em;
            color: #666;
        }

        /* Scientific Method Section Styling */
        .science-step {
            background-color: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            position: relative;
            transition: all 0.3s;
        }
        
        .science-step.active {
            border-color: var(--primary-green);
            box-shadow: 0 5px 15px rgba(107, 142, 35, 0.2);
            background-color: var(--step-bg);
        }

        .science-step.locked {
            opacity: 0.6;
            pointer-events: none;
            filter: grayscale(0.8);
        }

        .step-badge {
            position: absolute;
            top: -15px;
            left: 20px;
            background-color: var(--primary-green);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        h2 {
            color: var(--earth-brown);
            display: flex;
            align-items: center;
            font-size: 1.8em;
            margin-top: 10px;
        }
        
        h3 {
            color: #556B2F;
            border-left: 5px solid #556B2F;
            padding-left: 10px;
            margin-top: 30px;
            font-size: 1.4em;
        }

        h2 i { margin-right: 15px; color: var(--primary-green); }

        /* Step 1 & 2 Specifics */
        .thought-bubble {
            background: white;
            border: 2px dashed var(--earth-brown);
            padding: 20px;
            border-radius: 20px;
            position: relative;
            margin: 20px 0;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }

        .thought-bubble:hover {
            background-color: #fff8e1;
            transform: scale(1.02);
        }

        .thought-content { display: none; font-weight: bold; color: var(--earth-brown); }
        
        .hypothesis-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }

        .hypo-card {
            background: white; border: 2px solid #ccc; padding: 15px; border-radius: 10px; width: 45%; text-align: center; cursor: pointer;
        }
        
        .hypo-card.selected { border-color: var(--primary-green); background-color: #dcedc8; }

        /* --- Task 1: Pea Characteristics --- */
        .pea-challenges-grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: space-between; }

        .pea-challenge-card {
            background: white; border: 2px solid #8B4513; border-radius: 12px; width: 46%; min-height: 140px; padding: 15px; cursor: pointer; transition: all 0.3s; position: relative; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; background-image: linear-gradient(to bottom right, #fff, #f9f9f9);
        }

        .pea-challenge-card:hover { transform: translateY(-5px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }
        .pea-challenge-card.solved { background-color: #f1f8e9; border-color: var(--primary-green); cursor: default; transform: none; }
        .challenge-icon { font-size: 2.5em; color: #e67e22; margin-bottom: 10px; }
        .solved .challenge-icon { color: var(--primary-green); }
        .challenge-text { font-weight: bold; color: #555; }
        .solved-text { display: none; color: var(--primary-green); font-weight: bold; margin-top: 5px; animation: fadeIn 0.5s; }

        /* --- Task 1.5: Pollination Tech --- */
        .tech-container { display: flex; gap: 20px; justify-content: space-between; flex-wrap: wrap; margin-top: 20px; }
        .tech-box {
            flex: 1; min-width: 300px;
            background: white; border: 2px solid #ddd; border-radius: 12px; padding: 15px; text-align: center; position: relative;
        }
        .tech-title { font-weight: bold; color: var(--earth-brown); margin-bottom: 10px; font-size: 1.1em; }
        .tech-stage { height: 180px; background: #f0f4c3; border-radius: 10px; position: relative; overflow: hidden; margin-bottom: 10px; cursor: pointer; }
        
        .flower-demo { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 80px; color: #E0B0FF; transition: all 0.3s; }
        .stamen { position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); width: 40px; height: 40px; display: flex; justify-content: center; }
        .stamen i { color: gold; font-size: 20px; margin: 0 2px; }
        
        /* Tools */
        .tool-icon {
            position: absolute; font-size: 40px; z-index: 10; pointer-events: none; display: none;
        }
        
        .tech-instruction { font-size: 0.9em; color: #666; min-height: 40px; }

        /* --- Task 2: Drag and Drop --- */
        .pure-line-box { background-color: #fff3e0; border: 2px solid #ffe0b2; border-radius: 10px; padding: 15px; margin-bottom: 20px; }
        .pure-line-definition { font-weight: bold; color: #e65100; }
        .drag-area { display: flex; flex-direction: column; gap: 20px; margin-top: 20px; user-select: none; }
        .target-zones { display: flex; justify-content: space-between; gap: 10px; flex-wrap: wrap; }
        .drop-zone { width: 22%; min-width: 150px; height: 160px; border: 3px dashed #ccc; border-radius: 10px; background-color: #f9f9f9; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; transition: background-color 0.3s; }
        .drop-zone.hovered { background-color: #e0f2f1; border-color: var(--primary-green); }
        .step-number { position: absolute; top: -15px; background: var(--earth-brown); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .source-deck { background-color: #f0f0f0; padding: 20px; border-radius: 10px; min-height: 100px; display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; }
        .draggable-card { width: 140px; padding: 10px; background: white; border: 2px solid #8B4513; border-radius: 8px; cursor: grab; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); font-size: 0.9em; touch-action: none; position: relative; z-index: 10; }
        .draggable-card:active { cursor: grabbing; transform: scale(1.05); box-shadow: 0 10px 20px rgba(0,0,0,0.2); z-index: 100; }
        .draggable-card i { font-size: 1.8em; color: var(--primary-green); margin-bottom: 5px; display: block; }

        /* --- Question Box --- */
        .question-box {
            margin-top: 20px; padding: 15px; background-color: var(--highlight-yellow); border-radius: 10px; border: 2px dashed #FBC02D; display: none; text-align: left; animation: pop 0.5s;
        }
        .options-container { display: flex; gap: 15px; margin-top: 10px; flex-wrap: wrap; }
        .option-btn {
            background: white; border: 2px solid #ccc; padding: 8px 15px; border-radius: 8px; cursor: pointer; transition: all 0.2s; flex: 1; min-width: 120px; text-align: center; font-weight: bold;
        }
        .option-btn:hover { background-color: #f0f0f0; }
        .option-btn.selected-correct { background-color: var(--correct-color); color: white; border-color: var(--correct-color); }
        .option-btn.selected-wrong { background-color: var(--wrong-color); color: white; border-color: var(--wrong-color); }

        /* General UI Elements */
        .feedback-area { margin-top: 15px; font-weight: bold; text-align: center; min-height: 30px; }
        .action-btn { background-color: var(--earth-brown); color: white; border: none; padding: 10px 25px; border-radius: 50px; font-size: 1.1em; cursor: pointer; transition: all 0.3s; margin: 5px; box-shadow: 0 4px 6px rgba(0,0,0,0.2); }
        .action-btn:hover { background-color: #5D4037; transform: scale(1.05); }
        .action-btn:disabled { background-color: var(--disabled-gray); cursor: not-allowed; transform: none; box-shadow: none; }
        .sim-btn { background-color: #2980b9; font-size: 0.9em; padding: 8px 15px; }

        /* Experiment Area */
        .experiment-stage { background: white; border-radius: 15px; padding: 20px; margin-top: 15px; box-shadow: inset 0 0 10px rgba(0,0,0,0.05); text-align: center; min-height: 350px; position: relative; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; }
        .soil-base { position: absolute; bottom: 0; left: 0; width: 100%; height: 40px; background-color: var(--soil-dark); border-radius: 0 0 15px 15px; }
        .plant-group { display: flex; justify-content: center; align-items: flex-end; height: 200px; gap: 40px; width: 100%; margin-bottom: 35px; z-index: 5; pointer-events: none; }
        .plant { position: relative; transition: all 0.5s ease-in-out; transform-origin: bottom center; display: flex; flex-direction: column; align-items: center; width: 40px; }
        .plant i { color: var(--primary-green); }
        .plant-label { background: rgba(255,255,255,0.9); padding: 2px 8px; border-radius: 10px; font-size: 0.8em; margin-top: 5px; font-weight: bold; white-space: nowrap; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .pea-stem { width: 6px; background-color: var(--primary-green); border-radius: 3px; }
        .tall-plant .pea-stem { height: 150px; }
        .short-plant .pea-stem { height: 60px; }
        .pea-leaf { color: var(--primary-green); font-size: 24px; position: absolute; }
        .pea-flower { color: #E0B0FF; font-size: 20px; position: absolute; top: -10px; }
        .data-board { position: absolute; top: 20px; right: 20px; background-color: var(--board-bg); color: var(--board-text); padding: 15px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); text-align: left; min-width: 180px; border: 4px solid #95a5a6; display: none; z-index: 20; font-family: 'Courier New', monospace; }
        .data-board h3 { margin: 0 0 10px 0; font-size: 1.1em; border-bottom: 1px solid #7f8c8d; padding-bottom: 5px; text-align: center; }
        .data-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .data-highlight { color: #f1c40f; font-weight: bold; }
        .pollen { position: absolute; font-size: 20px; color: #FFD700; opacity: 0; pointer-events: none; z-index: 10; }
        
        @keyframes pollenMove { 0% { opacity: 1; transform: translate(0, 0); } 100% { opacity: 0; transform: translate(150px, -20px); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes pop { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes cutAction { 0% { transform: rotate(0deg); } 50% { transform: rotate(-30deg); } 100% { transform: rotate(0deg); } }

        .footer-nav { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 2px solid #eee; }
        .next-btn { display: inline-block; background-color: var(--primary-green); color: white; padding: 15px 40px; font-size: 1.5em; border-radius: 50px; text-decoration: none; box-shadow: 0 5px 15px rgba(107, 142, 35, 0.4); transition: all 0.3s; border: none; cursor: pointer; opacity: 0.5; pointer-events: none; }
        .next-btn.active { opacity: 1; pointer-events: auto; background-color: #556B2F; }
        
        /* Modal */
        .quiz-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
        .quiz-content { background: white; padding: 30px; border-radius: 15px; width: 90%; max-width: 500px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.2); border: 4px solid var(--primary-green); animation: pop 0.3s; }
        .quiz-options { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }

        /* IMPORTANT: Hidden class MUST be last to override flex */
        .hidden { display: none !important; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1><i class="fas fa-leaf"></i> 孟德爾的遺傳實驗室</h1>
        <div class="subtitle">單元二：科學探究與消失的矮莖</div>
    </header>

    <!-- Step 1: 觀察與提問 -->
    <div class="science-step active" id="step-question">
        <div class="step-badge">1. 觀察與提問</div>
        <h2><i class="fas fa-question-circle"></i> 孟德爾的疑惑</h2>
        <p>孟德爾在修道院花園觀察豌豆時，發現了一些奇怪的現象。請點擊下方的氣泡，看看他在想什麼？</p>
        
        <div class="thought-bubble" onclick="revealQuestion()">
            <i class="fas fa-user-tie" style="font-size: 2em; color:#555;"></i>
            <div id="thought-placeholder" style="margin-top:10px;">(點擊這裡揭曉孟德爾的想法)</div>
            <div id="thought-content" class="thought-content">
                「當我把高莖豌豆和矮莖豌豆雜交後，<br>
                為什麼矮莖的特徵有時候會『消失』，有時候又跑出來了？」
            </div>
        </div>

        <div id="question-choice" class="hidden" style="text-align: center;">
            <p>這引出了遺傳學的核心問題，請選擇正確的問題方向：</p>
            <button class="action-btn" onclick="selectQuestion(false)">豌豆好不好吃？</button>
            <button class="action-btn" onclick="selectQuestion(true)">消失的性狀去哪了？</button>
        </div>
        <div id="question-feedback" class="feedback-area"></div>
    </div>

    <!-- Step 2: 提出假說 -->
    <div class="science-step locked" id="step-hypothesis">
        <div class="step-badge">2. 提出假說</div>
        <h2><i class="fas fa-lightbulb"></i> 大膽的假設</h2>
        <p>孟德爾認為生物體內有「遺傳因子」在控制特徵。請幫他完善這個假說：</p>
        
        <div class="hypothesis-container">
            <div class="hypo-card" onclick="selectHypothesis('dominant')">
                <i class="fas fa-crown" style="font-size:2em; color:gold;"></i><br>
                <b>顯性因子 (Dominant)</b><br>
                遇到它，特徵就會...
            </div>
            <div class="hypo-card" onclick="selectHypothesis('recessive')">
                <i class="fas fa-ghost" style="font-size:2em; color:#bbb;"></i><br>
                <b>隱性因子 (Recessive)</b><br>
                遇到顯性，特徵就會...
            </div>
        </div>

        <div id="hypo-modal" class="hidden" style="background:#f9f9f9; padding:15px; margin-top:15px; border-radius:10px; text-align:center;">
            <p id="hypo-text">請選擇正確的描述：</p>
            <button class="action-btn" id="btn-show" onclick="checkHypothesis('show')">表現出來</button>
            <button class="action-btn" id="btn-hide" onclick="checkHypothesis('hide')">隱藏起來</button>
        </div>
        <div id="hypo-feedback" class="feedback-area"></div>
    </div>

    <!-- Step 3: 實驗設計 -->
    <div class="science-step locked" id="step-design">
        <div class="step-badge">3. 材料與方法</div>
        <h2><i class="fas fa-clipboard-check"></i> 實驗設計與材料</h2>
        
        <!-- Part 1: 選用適當材料 -->
        <h3><i class="fas fa-search-plus"></i> (1) 任務一：幫助孟德爾解決煩惱</h3>
        <p>選對材料是成功的關鍵。請點擊卡片，幫孟德爾解決他的實驗煩惱：</p>
        
        <div class="pea-challenges-grid">
            <div class="pea-challenge-card" onclick="openPeaQuiz('time')">
                <i class="fas fa-hourglass-half challenge-icon"></i>
                <div class="challenge-text">煩惱：<br>「我不想等好幾年才看到下一代的結果...」</div>
                <div class="solved-text" id="solved-time"><i class="fas fa-check-circle"></i> 正解：生長週期短</div>
            </div>
            <div class="pea-challenge-card" onclick="openPeaQuiz('traits')">
                <i class="fas fa-equals challenge-icon"></i>
                <div class="challenge-text">煩惱：<br>「如果特徵模稜兩可，我很難紀錄數據...」</div>
                <div class="solved-text" id="solved-traits"><i class="fas fa-check-circle"></i> 正解：特徵明顯</div>
            </div>
            <div class="pea-challenge-card" onclick="openPeaQuiz('pure')">
                <i class="fas fa-shield-alt challenge-icon"></i>
                <div class="challenge-text">煩惱：<br>「我需要確保親代的血統是純正的...」</div>
                <div class="solved-text" id="solved-pure"><i class="fas fa-check-circle"></i> 正解：天然自花授粉</div>
            </div>
            <div class="pea-challenge-card" onclick="openPeaQuiz('cross')">
                <i class="fas fa-cut challenge-icon"></i>
                <div class="challenge-text">煩惱：<br>「實驗時，我需要能夠輕鬆進行人工雜交...」</div>
                <div class="solved-text" id="solved-cross"><i class="fas fa-check-circle"></i> 正解：易於人工授粉</div>
            </div>
        </div>
        <div id="feature-feedback" class="feedback-area"></div> <!-- 補回這行 -->

        <!-- Part 1.5: 授粉技術體驗 -->
        <div id="tech-section" style="opacity:0.3; pointer-events:none; transition: opacity 0.5s;">
            <h3><i class="fas fa-tools"></i> (1.5) 關鍵技術：體驗授粉操作</h3>
            <p>光知道特性還不夠，請親手操作看看這兩種關鍵的授粉方式：</p>
            
            <div class="tech-container">
                <!-- 自花授粉 -->
                <div class="tech-box" id="tech-self">
                    <div class="tech-title">自花授粉 (Self-Pollination)</div>
                    <div class="tech-stage" onclick="simulateSelfPollination()">
                        <div class="flower-demo" id="flower-self"><i class="fas fa-seedling"></i></div>
                        <div style="position:absolute; top:10px; left:10px; font-size:0.8em; color:#555;">(點擊花朵)</div>
                    </div>
                    <div class="tech-instruction" id="msg-self">
                        豌豆花瓣緊閉，花粉會直接落在同一朵花的柱頭上。<br>這是<b>建立純品系</b>的關鍵。
                    </div>
                </div>

                <!-- 人工授粉 -->
                <div class="tech-box" id="tech-cross">
                    <div class="tech-title">人工授粉 (Artificial Pollination)</div>
                    <div class="tech-stage" onclick="simulateCrossPollination()">
                        <!-- Tools -->
                        <div class="tool-icon" id="tool-scissors" style="top:10px; right:10px; color:#c0392b;"><i class="fas fa-cut"></i></div>
                        <div class="tool-icon" id="tool-brush" style="top:10px; right:10px; color:#d35400;"><i class="fas fa-paint-brush"></i></div>

                        <div class="flower-demo" id="flower-cross-1" style="left:30%; color:#E0B0FF;"><i class="fas fa-seedling"></i></div>
                        <div class="flower-demo" id="flower-cross-2" style="left:70%; color:#fff; text-shadow:0 0 2px #ccc;"><i class="fas fa-seedling"></i></div>
                        
                        <div class="stamen" id="stamen-cross"><i class="fas fa-certificate"></i></div>
                        
                        <div style="position:absolute; top:10px; left:10px; font-size:0.8em; color:#555;">(點擊操作)</div>
                    </div>
                    <div class="tech-instruction" id="msg-cross">
                        點擊進行：<br>1. 剪刀去雄(防止自交) -> 2. 毛筆授粉(雜交)
                    </div>
                </div>
            </div>
            <div id="tech-feedback" class="feedback-area"></div>
        </div>

        <!-- Part 2: 基礎實驗方法 (拖曳排序) -->
        <div id="method-section" style="opacity:0.3; pointer-events:none; transition: opacity 0.5s;">
            <h3><i class="fas fa-vial"></i> (2) 任務二：排列實驗步驟</h3>
            <p style="text-align:center;"><i class="fas fa-hand-pointer"></i> 掌握了技術後，請拖曳下方的卡片，排出正確的實驗順序：</p>

            <div class="drag-area">
                <div class="target-zones">
                    <div class="drop-zone" id="zone-1" data-step="pure"><div class="step-number">1</div></div>
                    <div class="drop-zone" id="zone-2" data-step="hybrid"><div class="step-number">2</div></div>
                    <div class="drop-zone" id="zone-3" data-step="self"><div class="step-number">3</div></div>
                    <div class="drop-zone" id="zone-4" data-step="data"><div class="step-number">4</div></div>
                </div>
                <div class="source-deck" id="card-deck"></div>
            </div>
            <div id="design-feedback" class="feedback-area"></div>
        </div>
    </div>


    <!-- SECTION 2: 實驗執行 -->
    <div id="experiment-section" style="opacity: 0.5; pointer-events: none;">
        
        <!-- 步驟 1: P -> F1 -->
        <section id="stage-1">
            <h2><i class="fas fa-flask"></i> 實驗執行一：親代雜交 (P &#8594; F1)</h2>
            <p>設計完成了！現在讓我們依照步驟執行。首先，將「純種高莖」和「純種矮莖」進行人工授粉。</p>
            
            <div class="experiment-stage" id="exp1-canvas">
                <div id="data-board-1" class="data-board">
                    <h3><i class="fas fa-clipboard-list"></i> 實驗數據</h3>
                    <div class="data-row">樣本數: <span id="s1-total">0</span></div>
                    <hr style="border-color: #7f8c8d; opacity:0.5;">
                    <div class="data-row">高莖: <span id="s1-tall" class="data-highlight">0</span></div>
                    <div class="data-row">矮莖: <span id="s1-short">0</span></div>
                </div>
                <div class="soil-base"></div>
                <div id="p-generation" class="plant-group">
                    <div class="plant tall-plant">
                        <div class="pea-flower"><i class="fas fa-certificate"></i></div>
                        <div class="pea-stem"></div>
                        <div class="pea-leaf" style="left: -15px; bottom: 50px;"><i class="fas fa-leaf"></i></div>
                        <div class="plant-label">純品系(P)</div>
                    </div>
                    <div class="plant short-plant">
                        <div class="pea-flower"><i class="fas fa-certificate"></i></div>
                        <div class="pea-stem"></div>
                        <div class="pea-leaf" style="left: -10px; bottom: 20px;"><i class="fas fa-leaf"></i></div>
                        <div class="plant-label">純品系(P)</div>
                    </div>
                </div>
                <div id="f1-generation" class="plant-group hidden"></div>
                <div id="pollen-effect" class="pollen"><i class="fas fa-snowflake"></i></div>
            </div>

            <div style="text-align: center; margin-top: 15px;">
                <button class="action-btn" id="btn-pollinate-1" onclick="runExperiment1()">
                    <i class="fas fa-hand-holding-medical"></i> 進行人工授粉
                </button>
            </div>
            
            <!-- Question Box 1 -->
            <div class="question-box" id="q1-box">
                <p><b><i class="fas fa-search"></i> 數據分析：</b> 根據右上角的數據看板，第一子代 (F1) 的結果如何？</p>
                <div class="options-container">
                    <div class="option-btn" onclick="checkAnswer(1, 'tall', this)">100% 都是高莖</div>
                    <div class="option-btn" onclick="checkAnswer(1, 'mixed', this)">高莖與矮莖都有</div>
                    <div class="option-btn" onclick="checkAnswer(1, 'avg', this)">都是中等高度</div>
                </div>
                <div id="q1-feedback"></div>
            </div>
        </section>

        <!-- 步驟 2: F1 -> F2 -->
        <section id="stage-2" style="opacity: 0.5; pointer-events: none;">
            <h2><i class="fas fa-flask"></i> 實驗執行二：F1 自花授粉 (F1 &#8594; F2)</h2>
            <p>F1 全部是高莖！讓我們進行下一步：自花授粉並進行數據統計。</p>
            
            <div class="experiment-stage" id="exp2-canvas">
                <div id="data-board-2" class="data-board">
                    <h3><i class="fas fa-chart-bar"></i> 統計數據</h3>
                    <div class="data-row">樣本總數: <span id="s2-total">0</span></div>
                    <hr style="border-color: #7f8c8d; opacity:0.5;">
                    <div class="data-row">高莖: <span id="s2-tall" class="data-highlight">0</span></div>
                    <div class="data-row">矮莖: <span id="s2-short" class="data-highlight">0</span></div>
                    <div class="data-row" style="margin-top:5px; font-size:0.9em; color:#bdc3c7;">(高:矮 ≈ <span id="s2-ratio">0:0</span>)</div>
                </div>
                <div class="soil-base"></div>
                <div id="f1-selfing-parent" class="plant-group">
                    <div class="plant tall-plant">
                        <div class="pea-flower"><i class="fas fa-certificate"></i></div>
                        <div class="pea-stem"></div>
                        <div class="plant-label">第一子代(F1)</div>
                    </div>
                </div>
                <div id="f2-generation" class="plant-group hidden"></div>
            </div>

            <div style="text-align: center; margin-top: 15px;">
                <button class="action-btn" id="btn-pollinate-2" onclick="runExperiment2()">
                    <i class="fas fa-sync-alt"></i> 進行自花授粉
                </button>
                <button class="action-btn sim-btn hidden" id="btn-sim-more" onclick="simulateMoreData()">
                    <i class="fas fa-plus-circle"></i> 模擬種植 100 株
                </button>
            </div>
            
            <!-- Question Box 2 -->
            <div class="question-box" id="q2-box">
                <p><b><i class="fas fa-calculator"></i> 數據分析：</b> 觀察數據板，當樣本數越來越多時，高莖與矮莖的比例最接近？</p>
                <div class="options-container">
                    <div class="option-btn" onclick="checkAnswer(2, '1:1', this)">1 : 1</div>
                    <div class="option-btn" onclick="checkAnswer(2, '3:1', this)">3 : 1</div>
                    <div class="option-btn" onclick="checkAnswer(2, 'all', this)">全部高莖</div>
                </div>
                <div id="q2-feedback"></div>
            </div>
        </section>
    </div>

    <!-- 導航區域 -->
    <div class="footer-nav">
        <a href="mi036.html" class="next-btn" id="next-btn">
            前往下一關：解開遺傳密碼 <i class="fas fa-arrow-right"></i>
        </a>
    </div>

</div>

<!-- Quiz Modal -->
<div id="quiz-overlay" class="quiz-modal hidden">
    <div class="quiz-content">
        <h3 id="quiz-question">問題內容</h3>
        <div class="quiz-options" id="quiz-options"></div>
        <button class="action-btn" onclick="closeQuiz()" style="margin-top:15px; background:#999;">取消</button>
    </div>
</div>

<script>
    // --- 變數 ---
    let q1Solved = false;
    let hypothesisScore = 0;
    let currentHypoType = '';
    
    // Step 3 變數
    let peaFeaturesRevealed = 0;
    const totalPeaFeatures = 4;
    let techSelfDone = false;
    let techCrossDone = false;
    let crossStep = 0; // 0: init, 1: cut, 2: pollen
    let draggedItem = null;
    let touchOffset = { x: 0, y: 0 }; 

    // 實驗卡片
    const methodCards = [
        { id: 'pure', icon: 'fa-filter', text: '建立純品系', sub: '確保親代基因純正' },
        { id: 'hybrid', icon: 'fa-venus-mars', text: '單性雜交', sub: '不同性狀親代交配' },
        { id: 'self', icon: 'fa-sync-alt', text: 'F1 自花授粉', sub: '讓F1自交產生F2' },
        { id: 'data', icon: 'fa-chart-bar', text: '大數據統計', sub: '分析數千顆種子' }
    ];

    // 實驗變數
    let stage1Complete = false;
    let stage2Complete = false;
    let f2Total = 0;
    let f2Tall = 0;
    let f2Short = 0;

    // --- Step 1 & 2 Logic ---
    function revealQuestion() {
        document.getElementById('thought-placeholder').style.display = 'none';
        document.getElementById('thought-content').style.display = 'block';
        document.getElementById('question-choice').classList.remove('hidden');
    }

    function selectQuestion(isCorrect) {
        const feedback = document.getElementById('question-feedback');
        if (isCorrect) {
            feedback.innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check"></i> 正確！這就是孟德爾最好奇的問題。</span>`;
            q1Solved = true;
            setTimeout(() => {
                document.getElementById('step-question').classList.remove('active');
                unlockSection('step-hypothesis');
            }, 1000);
        } else {
            feedback.innerHTML = `<span style="color:var(--wrong-color)"><i class="fas fa-times"></i> 雖然豌豆很好吃，但這不是科學問題喔！</span>`;
        }
    }

    function unlockSection(id) {
        const el = document.getElementById(id); el.classList.remove('locked'); el.classList.add('active'); el.scrollIntoView({behavior: "smooth", block: "center"});
    }

    function selectHypothesis(type) {
        currentHypoType = type;
        const modal = document.getElementById('hypo-modal');
        const text = document.getElementById('hypo-text');
        document.querySelectorAll('.hypo-card').forEach(c => c.classList.remove('selected'));
        if(type === 'dominant') document.querySelector('.hypo-card:first-child').classList.add('selected');
        else document.querySelector('.hypo-card:last-child').classList.add('selected');
        modal.classList.remove('hidden');
        if (type === 'dominant') text.innerText = '顯性因子 (Dominant) 會讓特徵...';
        else text.innerText = '隱性因子 (Recessive) 遇到顯性時，特徵會...';
    }

    function checkHypothesis(ans) {
        const feedback = document.getElementById('hypo-feedback');
        let isCorrect = false;
        if (currentHypoType === 'dominant' && ans === 'show') isCorrect = true;
        if (currentHypoType === 'recessive' && ans === 'hide') isCorrect = true;

        if (isCorrect) {
            feedback.innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check"></i> 答對了！</span>`;
            hypothesisScore++;
            document.getElementById('hypo-modal').classList.add('hidden');
            if (hypothesisScore >= 2) {
                 setTimeout(() => {
                    document.getElementById('step-hypothesis').classList.remove('active');
                    unlockSection('step-design');
                }, 1000);
            }
        } else {
            feedback.innerHTML = `<span style="color:var(--wrong-color)"><i class="fas fa-times"></i> 想一想，顯性比較強勢，隱性比較害羞喔！</span>`;
        }
    }

    // --- Task 1: Pea Quiz Interaction ---
    const peaQuizzes = {
        'time': { q: "想要快速得到多代遺傳的結果，豌豆的什麼特性最有幫助？", options: [{ text: "生長週期短", correct: true }, { text: "莖很高大", correct: false }] },
        'traits': { q: "為了避免紀錄數據時產生混淆，性狀應該具備什麼特點？", options: [{ text: "性狀有許多中間型", correct: false }, { text: "特徵明顯，沒有中間型", correct: true }] },
        'pure': { q: "在雜交前要確保親代是純種，哪種特性讓豌豆容易保持純種？", options: [{ text: "天然異花授粉", correct: false }, { text: "天然自花授粉", correct: true }] },
        'cross': { q: "實驗需要控制父母本，哪種特性方便我們進行「人工授粉」？", options: [{ text: "花朵大，易移除雄蕊", correct: true }, { text: "花朵小，藏在葉子裡", correct: false }] }
    };
    let currentQuizId = null;

    function openPeaQuiz(id) {
        if (document.getElementById(`solved-${id}`).style.display === 'block') return;
        currentQuizId = id;
        const data = peaQuizzes[id];
        document.getElementById('quiz-question').innerText = data.q;
        const optsContainer = document.getElementById('quiz-options');
        optsContainer.innerHTML = '';
        const shuffled = [...data.options].sort(()=>Math.random()-0.5);
        shuffled.forEach(opt => {
            const btn = document.createElement('button'); btn.className = 'action-btn'; btn.innerText = opt.text;
            btn.onclick = () => checkPeaAnswer(opt.correct, id); optsContainer.appendChild(btn);
        });
        document.getElementById('quiz-overlay').classList.remove('hidden');
    }
    function closeQuiz() { document.getElementById('quiz-overlay').classList.add('hidden'); }

    function checkPeaAnswer(isCorrect, id) {
        if (isCorrect) {
            closeQuiz();
            const solvedText = document.getElementById(`solved-${id}`);
            solvedText.style.display = 'block'; solvedText.parentElement.classList.add('solved');
            solvedText.parentElement.querySelector('.challenge-icon').className = "fas fa-check-circle challenge-icon";
            peaFeaturesRevealed++;
            if (peaFeaturesRevealed === totalPeaFeatures) {
                document.getElementById('feature-feedback').innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check-circle"></i> 太棒了！了解特性後，我們來練習關鍵的授粉技術。</span>`;
                setTimeout(() => {
                    const techSection = document.getElementById('tech-section');
                    techSection.style.opacity = '1'; techSection.style.pointerEvents = 'auto';
                    techSection.scrollIntoView({behavior: "smooth", block: "center"});
                }, 1000);
            }
        } else { alert("再想一想，這個特性真的能解決孟德爾的煩惱嗎？"); }
    }

    // --- Task 1.5: Pollination Tech ---
    function simulateSelfPollination() {
        if (techSelfDone) return;
        const flower = document.getElementById('flower-self');
        const msg = document.getElementById('msg-self');
        
        // Animation
        flower.style.transform = "translateX(-50%) scale(1.1)";
        msg.innerHTML = "<i class='fas fa-circle-notch fa-spin'></i> 閉鎖授粉中...";
        
        setTimeout(() => {
             flower.style.transform = "translateX(-50%) scale(1)";
             flower.style.color = "#4CAF50"; // Turn green indicating fertilized
             msg.innerHTML = "<i class='fas fa-check'></i> <b>完成！</b> 花粉自然落在柱頭上，基因純度 100%。";
             techSelfDone = true;
             checkTechCompletion();
        }, 1500);
    }

    function simulateCrossPollination() {
        if (techCrossDone) return;
        const msg = document.getElementById('msg-cross');
        const scissors = document.getElementById('tool-scissors');
        const brush = document.getElementById('tool-brush');
        const stamen = document.getElementById('stamen-cross');
        
        if (crossStep === 0) {
            // Step 1: Emasculation
            scissors.style.display = "block";
            scissors.style.animation = "cutAction 1s infinite";
            msg.innerHTML = "<b>步驟 1：</b> 正在剪去紫花的雄蕊，防止它自花授粉...";
            
            setTimeout(() => {
                stamen.style.display = 'none'; // Remove stamen
                scissors.style.display = "none";
                crossStep = 1;
                msg.innerHTML = "<b>步驟 1 完成！</b> 請再點擊一次進行授粉。";
            }, 1500);
        } else if (crossStep === 1) {
            // Step 2: Pollination
            brush.style.display = "block";
            // Move brush from white flower to purple flower
            brush.style.right = "20px"; // Start at white
            brush.style.transition = "all 1s";
            
            setTimeout(() => {
                brush.style.right = "180px"; // Move to purple
                msg.innerHTML = "<b>步驟 2：</b> 將白花的花粉沾到紫花的柱頭上...";
            }, 100);

            setTimeout(() => {
                brush.style.display = "none";
                document.getElementById('flower-cross-1').style.color = "#4CAF50"; // Fertilized
                msg.innerHTML = "<i class='fas fa-check'></i> <b>完成！</b> 人工雜交成功。";
                techCrossDone = true;
                crossStep = 2;
                checkTechCompletion();
            }, 1500);
        }
    }

    function checkTechCompletion() {
        if (techSelfDone && techCrossDone) {
            document.getElementById('tech-feedback').innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check-circle"></i> 技術掌握！現在你可以設計實驗步驟了。</span>`;
            setTimeout(() => {
                const methodSection = document.getElementById('method-section');
                methodSection.style.opacity = '1'; methodSection.style.pointerEvents = 'auto';
                methodSection.scrollIntoView({behavior: "smooth", block: "center"});
                initDragAndDrop();
            }, 1000);
        }
    }

    // --- Task 2: Drag and Drop ---
    function initDragAndDrop() {
        const deck = document.getElementById('card-deck'); deck.innerHTML = '';
        const shuffled = [...methodCards].sort(() => Math.random() - 0.5);
        shuffled.forEach(card => {
            const el = document.createElement('div'); el.className = 'draggable-card'; el.setAttribute('draggable', 'true');
            el.setAttribute('data-id', card.id); el.innerHTML = `<i class="fas ${card.icon}"></i><b>${card.text}</b><br><span style="font-size:0.8em;color:#666;">${card.sub}</span>`;
            el.addEventListener('dragstart', handleDragStart); el.addEventListener('dragend', handleDragEnd);
            el.addEventListener('touchstart', handleTouchStart, {passive: false}); el.addEventListener('touchmove', handleTouchMove, {passive: false}); el.addEventListener('touchend', handleTouchEnd);
            deck.appendChild(el);
        });
        document.querySelectorAll('.drop-zone').forEach(zone => {
            zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('hovered'); });
            zone.addEventListener('dragleave', () => zone.classList.remove('hovered'));
            zone.addEventListener('drop', handleDrop);
        });
    }

    function handleDragStart(e) { draggedItem = this; setTimeout(() => this.style.opacity = '0.5', 0); }
    function handleDragEnd(e) { this.style.opacity = '1'; draggedItem = null; document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('hovered')); }
    function handleDrop(e) {
        e.preventDefault(); this.classList.remove('hovered');
        if (draggedItem) {
            if (this.children.length > 1) { const existing = this.querySelector('.draggable-card'); if(existing) document.getElementById('card-deck').appendChild(existing); }
            this.appendChild(draggedItem); checkSortOrder();
        }
    }
    // Touch handlers...
    function handleTouchStart(e) { e.preventDefault(); const touch = e.touches[0]; draggedItem = this; const rect = this.getBoundingClientRect(); touchOffset.x = touch.clientX - rect.left; touchOffset.y = touch.clientY - rect.top; this.style.position = 'fixed'; this.style.left = rect.left + 'px'; this.style.top = rect.top + 'px'; this.style.zIndex = 1000; this.style.opacity = 0.8; }
    function handleTouchMove(e) { e.preventDefault(); if (!draggedItem) return; const touch = e.touches[0]; draggedItem.style.left = (touch.clientX - touchOffset.x) + 'px'; draggedItem.style.top = (touch.clientY - touchOffset.y) + 'px'; }
    function handleTouchEnd(e) { if (!draggedItem) return; draggedItem.style.position = ''; draggedItem.style.left = ''; draggedItem.style.top = ''; draggedItem.style.zIndex = ''; draggedItem.style.opacity = ''; const touch = e.changedTouches[0]; draggedItem.style.display = 'none'; const elemBelow = document.elementFromPoint(touch.clientX, touch.clientY); draggedItem.style.display = 'block'; const zone = elemBelow ? elemBelow.closest('.drop-zone') : null; if (zone) { const existing = zone.querySelector('.draggable-card'); if(existing) document.getElementById('card-deck').appendChild(existing); zone.appendChild(draggedItem); } else { document.getElementById('card-deck').appendChild(draggedItem); } draggedItem = null; checkSortOrder(); }

    function checkSortOrder() {
        const zones = ['zone-1', 'zone-2', 'zone-3', 'zone-4']; const correctOrder = ['pure', 'hybrid', 'self', 'data'];
        let correctCount = 0; let filledCount = 0;
        zones.forEach((zid, idx) => { const zone = document.getElementById(zid); const card = zone.querySelector('.draggable-card'); if (card) { filledCount++; if (card.getAttribute('data-id') === correctOrder[idx]) correctCount++; } });
        const feedback = document.getElementById('design-feedback');
        if (filledCount === 4) {
            if (correctCount === 4) {
                feedback.innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check-circle"></i> 順序正確！實驗開始！</span>`;
                document.querySelectorAll('.draggable-card').forEach(c => c.setAttribute('draggable', 'false'));
                setTimeout(() => { document.getElementById('step-design').classList.remove('active'); startExperiment(); }, 1500);
            } else { feedback.innerHTML = `<span style="color:var(--wrong-color)"><i class="fas fa-exclamation-triangle"></i> 順序不對喔！</span>`; }
        } else { feedback.innerHTML = ""; }
    }

    // --- Experiment Execution Functions ---
    function startExperiment() { const expSection = document.getElementById('experiment-section'); expSection.style.opacity = '1'; expSection.style.pointerEvents = 'auto'; expSection.scrollIntoView({behavior: "smooth", block: "start"}); }

    function runExperiment1() {
        const btn = document.getElementById('btn-pollinate-1'); btn.disabled = true; btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> 生長中...`;
        const pollen = document.getElementById('pollen-effect'); pollen.style.top = '100px'; pollen.style.left = '35%'; pollen.style.animation = 'pollenMove 1s forwards';
        setTimeout(() => {
            document.getElementById('p-generation').style.display = 'none';
            const f1Div = document.getElementById('f1-generation'); f1Div.classList.remove('hidden'); f1Div.innerHTML = '';
            for(let i=0; i<4; i++) { f1Div.innerHTML += `<div class="plant tall-plant" style="animation: grow 0.5s ${i*0.2}s backwards;"><div class="pea-flower"><i class="fas fa-certificate"></i></div><div class="pea-stem"></div><div class="pea-leaf" style="left: -15px; bottom: 50px;"><i class="fas fa-leaf"></i></div><div class="plant-label">F1</div></div>`; }
            document.getElementById('data-board-1').style.display = 'block';
            animateValue("s1-total", 0, 50, 1000); animateValue("s1-tall", 0, 50, 1000); document.getElementById("s1-short").innerText = "0";
            btn.innerHTML = `<i class="fas fa-check"></i> 完成`;
            
            // Show Question 1
            document.getElementById('q1-box').style.display = 'block';
            document.getElementById('q1-box').scrollIntoView({behavior: "smooth", block: "center"});
            
        }, 1000);
    }
    
    // Check Answer Function
    function checkAnswer(qNum, answer, btnElement) {
        if (qNum === 1) {
            const feedback = document.getElementById('q1-feedback');
            btnElement.parentElement.querySelectorAll('.option-btn').forEach(b => { b.classList.remove('selected-correct', 'selected-wrong'); });
            if (answer === 'tall') {
                btnElement.classList.add('selected-correct');
                feedback.innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check"></i> 正確！純種高莖與矮莖雜交，第一代全部都是高莖。</span>`;
                stage1Complete = true; unlockStage2();
            } else {
                btnElement.classList.add('selected-wrong');
                feedback.innerHTML = `<span style="color:var(--wrong-color)"><i class="fas fa-times"></i> 再看一次數據，矮莖數量是 0 喔！</span>`;
            }
        } else if (qNum === 2) {
            const feedback = document.getElementById('q2-feedback');
            btnElement.parentElement.querySelectorAll('.option-btn').forEach(b => { b.classList.remove('selected-correct', 'selected-wrong'); });
            if (answer === '3:1') {
                btnElement.classList.add('selected-correct');
                feedback.innerHTML = `<span style="color:var(--correct-color)"><i class="fas fa-check"></i> 正確！高莖約是矮莖的 3 倍，這就是著名的 3:1 定律。</span>`;
                stage2Complete = true; checkCompletion();
            } else {
                btnElement.classList.add('selected-wrong');
                feedback.innerHTML = `<span style="color:var(--wrong-color)"><i class="fas fa-times"></i> 觀察數據板的比例提示，再試一次！</span>`;
            }
        }
    }

    function unlockStage2() { const s2 = document.getElementById('stage-2'); s2.style.opacity = '1'; s2.style.pointerEvents = 'auto'; }

    function runExperiment2() {
        const btn = document.getElementById('btn-pollinate-2'); const simBtn = document.getElementById('btn-sim-more');
        if (f2Total === 0) {
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> 生長中...`;
            setTimeout(() => {
                document.getElementById('f1-selfing-parent').style.display = 'none';
                const f2Div = document.getElementById('f2-generation'); f2Div.classList.remove('hidden');
                renderVisualF2Plants(3, 1);
                document.getElementById('data-board-2').style.display = 'block';
                updateF2Data(4);
                btn.style.display = 'none'; simBtn.classList.remove('hidden');
                
                // Show Question 2
                document.getElementById('q2-box').style.display = 'block';
                document.getElementById('q2-box').scrollIntoView({behavior: "smooth", block: "center"});
                
            }, 1000);
        }
    }

    function renderVisualF2Plants(tallCount, shortCount) {
        const f2Div = document.getElementById('f2-generation'); let plantsHtml = '';
        for(let i=0; i<tallCount; i++) plantsHtml += `<div class="plant tall-plant" style="animation: grow 0.5s ${i*0.1}s backwards;"><div class="pea-flower"><i class="fas fa-certificate"></i></div><div class="pea-stem"></div><div class="plant-label">F2</div></div>`;
        for(let i=0; i<shortCount; i++) plantsHtml += `<div class="plant short-plant" style="animation: grow 0.5s ${0.3 + i*0.1}s backwards;"><div class="pea-flower"><i class="fas fa-certificate"></i></div><div class="pea-stem"></div><div class="plant-label">F2</div></div>`;
        f2Div.innerHTML = plantsHtml;
    }

    function simulateMoreData() {
        updateF2Data(100); renderVisualF2Plants(3, 1);
        const simBtn = document.getElementById('btn-sim-more'); simBtn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> 計算中...`; simBtn.disabled = true;
        setTimeout(() => { simBtn.innerHTML = `<i class="fas fa-plus-circle"></i> 再模擬種植 100 株`; simBtn.disabled = false; }, 500);
    }

    function updateF2Data(count) {
        let newTall = 0; let newShort = 0;
        for(let i=0; i<count; i++) { if (Math.random() < 0.75) newTall++; else newShort++; }
        f2Total += count; f2Tall += newTall; f2Short += newShort;
        document.getElementById('s2-total').innerText = f2Total; document.getElementById('s2-tall').innerText = f2Tall; document.getElementById('s2-short').innerText = f2Short;
        let ratioTall = (f2Tall / f2Short).toFixed(1); if (f2Short === 0) ratioTall = f2Tall;
        document.getElementById('s2-ratio').innerText = `${ratioTall} : 1`;
    }

    function animateValue(id, start, end, duration) {
        if (start === end) return;
        var range = end - start; var current = start; var increment = end > start? 1 : -1; var stepTime = Math.abs(Math.floor(duration / range));
        var obj = document.getElementById(id);
        var timer = setInterval(function() { current += increment; obj.innerHTML = current; if (current == end) { clearInterval(timer); } }, stepTime);
    }

    function checkCompletion() {
        if (stage1Complete && stage2Complete) {
            const nextBtn = document.getElementById('next-btn'); nextBtn.classList.add('active'); nextBtn.innerHTML = `恭喜完成科學探究！前往下一關 <i class="fas fa-arrow-right"></i>`;
            document.body.style.transition = "background-color 1s"; document.body.style.backgroundColor = "#e8f5e9";
        }
    }

    const styleSheet = document.createElement("style");
    styleSheet.innerText = `@keyframes grow { 0% { transform: scaleY(0); opacity: 0; } 100% { transform: scaleY(1); opacity: 1; } }`;
    document.head.appendChild(styleSheet);

</script>
</body>
</html>